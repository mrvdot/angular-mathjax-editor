!function(a){"use strict";a.module("mvd.mathjax",["ngSanitize"]).provider("mathjax",function(){var b=!1,c={ready:!1,_onReady:[]},d="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config={$CONFIG}&delayStartupUntil=configured",e="TeX-AMS-MML_HTMLorMML",f={tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}},g=function(){c.m.Hub.Config(f),c.m.Hub.Configured(),b=!0},h=function(a,b,e,f){var h=d.replace("{$CONFIG}",e);a.MathJax={AuthorInit:function(){var b=c._onReady;c.m=a.MathJax,c.m.Hub.Register.StartupHook("Begin Config",g),c.m.Hub.Register.StartupHook("End",function(){c.ready=!0;for(var a=0,d=b.length;d>a;a++)b[a]()})}};var i=document.createElement("script");i.type="text/javascript",i.src=h,document.getElementsByTagName("head")[0].appendChild(i)};return this.options=function(c,d){if(!c)return f;if(b)throw"Trying to set MathJax options after already initialized";return a.isObject(obj)?d===!0?a.copy(c,f):a.extend(f,c):f[c]=d,this},this.$get=["$window","$document",function(a,b){return h(a,b[0],e,f),c}],this}).directive("equationEditor",["mathjax",function(b){return{template:'<div class="equation-editor"><input type="hidden" value="{{equationText}}" /><div class="equation-display"></div></div>',replace:!0,require:"ngModel",link:function(c,d,e,f){var g,h=function(){if(c.equationText=f.$viewValue,c.equationText){if(!g){var a=b.m.Hub.getAllJax(d[0]);if(!a||!a.length)return d.find(".equation-display").html(f.$viewValue),void b.m.Hub.Queue(["Typeset",b.m.Hub,d[0]]);g=a[0]}b.m.Hub.Queue(["Text",g,f.$viewValue])}};b.ready?f.$render=h:(f.$render=a.noop,b._onReady.push(function(){h(),f.$render=h}))}}}]).run(["mathjax",function(a){}])}(angular);